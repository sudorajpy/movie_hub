import 'controller/sign_up_controller.dart';import 'package:flutter/material.dart';import 'package:raj_singh_s_application3/core/app_export.dart';import 'package:raj_singh_s_application3/widgets/custom_button.dart';import 'package:raj_singh_s_application3/widgets/custom_text_form_field.dart';import 'package:raj_singh_s_application3/data/models/register/post_register_req.dart';import 'package:raj_singh_s_application3/data/models/register/post_register_resp.dart';import 'package:raj_singh_s_application3/core/constants/user.dart';import 'package:fluttertoast/fluttertoast.dart';import 'package:raj_singh_s_application3/domain/googleauth/google_auth_helper.dart';import 'package:raj_singh_s_application3/domain/facebookauth/facebook_auth_helper.dart';class SignUpScreen extends GetWidget<SignUpController> {@override Widget build(BuildContext context) { return SafeArea(child: Scaffold(resizeToAvoidBottomInset: false, backgroundColor: ColorConstant.black900, body: Container(width: double.maxFinite, padding: getPadding(left: 16, top: 47, right: 16, bottom: 47), child: Column(mainAxisAlignment: MainAxisAlignment.start, children: [Text("lbl_sign_up".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsMedium24), CustomTextFormField(focusNode: FocusNode(), controller: controller.emailaddressController, hintText: "lbl_full_name".tr, margin: getMargin(top: 45)), CustomTextFormField(focusNode: FocusNode(), controller: controller.passwordController, hintText: "lbl_email_address".tr, margin: getMargin(top: 32), textInputType: TextInputType.emailAddress), Obx(() => CustomTextFormField(focusNode: FocusNode(), controller: controller.passwordOneController, hintText: "lbl_password".tr, margin: getMargin(top: 31), textInputAction: TextInputAction.done, textInputType: TextInputType.visiblePassword, suffix: InkWell(onTap: () {controller.isShowPassword.value = !controller.isShowPassword.value;}, child: Container(margin: getMargin(left: 30, right: 19, bottom: 18), child: CustomImageView(svgPath: controller.isShowPassword.value ? ImageConstant.imgEye : ImageConstant.imgEye))), suffixConstraints: BoxConstraints(maxHeight: getVerticalSize(42)), isObscureText: controller.isShowPassword.value)), CustomButton(height: getVerticalSize(50), text: "lbl_sign_up2".tr, margin: getMargin(top: 35), fontStyle: ButtonFontStyle.PoppinsMedium16WhiteA700, onTap: () {onTapSignupOne();}), Padding(padding: getPadding(left: 19, top: 36, right: 18), child: Row(mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.start, children: [Padding(padding: getPadding(top: 8, bottom: 9), child: SizedBox(width: getHorizontalSize(132), child: Divider(height: getVerticalSize(1), thickness: getVerticalSize(1), color: ColorConstant.whiteA7006c))), Padding(padding: getPadding(left: 14), child: Text("lbl_or".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12)), Padding(padding: getPadding(top: 8, bottom: 9), child: SizedBox(width: getHorizontalSize(146), child: Divider(height: getVerticalSize(1), thickness: getVerticalSize(1), color: ColorConstant.whiteA7006c, indent: getHorizontalSize(14))))])), Padding(padding: getPadding(top: 31), child: Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [GestureDetector(onTap: () {onTapRowgoogletwo();}, child: Container(padding: getPadding(left: 43, top: 12, right: 43, bottom: 12), decoration: AppDecoration.fillWhiteA70063.copyWith(borderRadius: BorderRadiusStyle.circleBorder25), child: Row(mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.start, children: [CustomImageView(imagePath: ImageConstant.imgGoogle2, height: getSize(25), width: getSize(25), margin: getMargin(bottom: 1)), Padding(padding: getPadding(left: 10, top: 4, bottom: 3), child: Text("lbl_google".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12WhiteA700))]))), GestureDetector(onTap: () {onTapRowfacebookeleven();}, child: Container(padding: getPadding(left: 35, top: 11, right: 35, bottom: 11), decoration: AppDecoration.fillWhiteA70063.copyWith(borderRadius: BorderRadiusStyle.circleBorder25), child: Row(mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.start, children: [CustomImageView(imagePath: ImageConstant.imgFacebook11, height: getSize(27), width: getSize(27), margin: getMargin(bottom: 1)), Padding(padding: getPadding(left: 10, top: 4, bottom: 5), child: Text("lbl_facebook".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12WhiteA700))])))])), Padding(padding: getPadding(left: 38, top: 49, right: 37, bottom: 5), child: Row(mainAxisAlignment: MainAxisAlignment.center, children: [Text("msg_do_you_already2".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12WhiteA700a2), GestureDetector(onTap: () {onTapTxtLoginnow();}, child: Padding(padding: getPadding(left: 4), child: Text("lbl_login_now".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsMedium12.copyWith(decoration: TextDecoration.underline))))]))])))); } 
Future<void> onTapSignupOne() async  { PostRegisterReq postRegisterReq = PostRegisterReq(username : controller.passwordController.text,password : controller.passwordOneController.text,email : controller.passwordController.text,name : controller.emailaddressController.text,role: User.role,);try {
await controller.callCreateRegister(postRegisterReq.toJson(),);_onOnTapSignUpSuccess();} on PostRegisterResp {_onOnTapSignUpError();} on NoInternetException catch (e) {Get.rawSnackbar(message: e.toString());} catch (e) {
 //TODO: Handle generic errors
} } 
void _onOnTapSignUpSuccess() { Get.offAllNamed(AppRoutes.homeContainerScreen, ); } 
void _onOnTapSignUpError() { 

Fluttertoast.showToast(msg: controller.postRegisterResp.message!.toString(),); } 
onTapRowgoogletwo() async  {         await GoogleAuthHelper().googleSignInProcess().then((googleUser) {
          if(googleUser!=null){
            //TODO Actions to be performed after signin
          } else {
            Get.snackbar('Error', 'user data is empty');
          }
        }).catchError((onError) {
            Get.snackbar('Error', onError.toString());
        });
         } 
onTapRowfacebookeleven() async  {             await FacebookAuthHelper().facebookSignInProcess().then((facebookUser) {
              //TODO Actions to be performed after signin
              }).catchError((onError) {
              Get.snackbar('Error', onError.toString());
            });
             } 
onTapTxtLoginnow() { Get.toNamed(AppRoutes.loginScreen, ); } 
 }
